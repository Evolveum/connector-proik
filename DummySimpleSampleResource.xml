<?xml version="1.0" encoding="UTF-8"?>
<objects xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3">
	<resource xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
          xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
          xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
          oid="e7f50b97-f738-4df0-be7a-f6c013137c19"
          version="12">
   <name>ProIK Mockup Sample</name>
   <operationalState>
      <lastAvailabilityStatus>up</lastAvailabilityStatus>
   </operationalState>
   <connectorRef type="c:ConnectorType">
      <filter>
         <q:equal>
            <q:path>c:connectorType</q:path>
            <q:value>com.evolveum.polygon.connector.proik.ProIKConnector</q:value>
         </q:equal>
      </filter>
   </connectorRef>
   <connectorConfiguration xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3">
      <icfc:configurationProperties xmlns:gen398="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.polygon.connector-proik/com.evolveum.polygon.connector.proik.ProIKConnector">
         <gen398:generateModifyTimestamp>true</gen398:generateModifyTimestamp>
         <gen398:useMockup>true</gen398:useMockup>
      </icfc:configurationProperties>
   </connectorConfiguration>
   <schemaHandling>
      <objectType>
         <kind>account</kind>
         <intent>default</intent>
         <displayName>ProUser</displayName>
         <default>true</default>
         <objectClass>ri:AccountObjectClass</objectClass>
         <attribute>
            <c:ref>icfs:uid</c:ref>
            <displayName>tckn in UID</displayName>
            <limitations>
               <access>
                  <read>true</read>
               </access>
            </limitations>
         </attribute>
         <attribute>
            <c:ref>icfs:name</c:ref>
            <displayName>tckn</displayName>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>extension/TCKN</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:kullaniciAdi</c:ref>
            <limitations>
               <minOccurs>0</minOccurs>
            </limitations>
               <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>name</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:adi</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>givenName</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:soyadi</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>familyName</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:eposta</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>emailAddress</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:etkiAlanieh</c:ref>
            <outbound>
               <strength>strong</strength>
               <expression>
                  <script>
                     <code>
                        'E'
                     </code>
                  </script>
               </expression>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:etkiAlani</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>$user/name</c:path>
               </source>
               <expression>
                  <script>
                     <code>
                        'sampleDomainName\\'+name
                     </code>
                  </script>
               </expression>
            </outbound>
         </attribute>
         <activation>
            <administrativeStatus>
               <outbound>
                   <strength>strong</strength>
                   <expression>
                       <asIs/>
                   </expression>
               </outbound>
            </administrativeStatus>
         </activation>
      </objectType>
   </schemaHandling>

   <synchronization>
      <objectSynchronization>
         <name>ProUser sync</name>
         <objectClass>ri:AccountObjectClass</objectClass>
         <kind>account</kind>
         <intent>default</intent>
         <enabled>true</enabled>
         <correlation>
             <q:equal>
                 <q:path>c:extension/TCKN</q:path>
                 <expression>
                     <c:path>$account/attributes/uid</c:path>
                 </expression>
             </q:equal>
         </correlation>
         <!-- in your config please use:

         <correlation>
            <q:equal>
               <q:path>c:extension/TCKN</q:path>
               <expression>
                  <c:path>$shadow/attributes/uid</c:path>
               </expression>
            </q:equal>
            <condition>
               <script>
                  <code>
                  import static com.evolveum.midpoint.schema.constants.SchemaConstants.*
                  println(basic.getAttributeValue(shadow, ICFS_UID))
                  basic.getAttributeValue(shadow, ICFS_UID) != null
                 </code>
               </script>
            </condition>
         </correlation>
         -->
         <reaction>
            <situation>linked</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#modifyUser</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>deleted</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlinkAccount</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unlinked</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#linkAccount</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unmatched</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>

            </action>
         </reaction>
      </objectSynchronization>
   </synchronization>
</resource>
</objects>